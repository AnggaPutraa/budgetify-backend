{% extends "admin/change_form.html" %} {% load static %} {% block extrahead %}
{{ block.super }}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $("#id_type").change(function () {
            $.get(
                `/getSubcategory/?id=${$('#id_type option:selected').val()}`,
                (response) => {
                    var options = '<option value="">---------</option>';
                    for (var i = 0; i < response.length; i++) {
                        options +=
                            '<option value="' + response[i].pk + '">' + response[i].fields.name + "</option>";
                    }
                    $('#id_category').html(options);
                }
            )
        });
    });
</script>
{% endblock %}